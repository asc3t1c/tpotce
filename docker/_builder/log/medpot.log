Compose now can delegate build to bake for better performances
Just set COMPOSE_BAKE=true
#0 building with "mybuilder" instance using docker-container driver

#1 [medpot internal] load build definition from Dockerfile
#1 transferring dockerfile: 983B 0.0s done
#1 DONE 0.0s

#2 [medpot linux/amd64 internal] load metadata for docker.io/library/golang:1.23-alpine
#2 ...

#3 [medpot auth] library/golang:pull token for registry-1.docker.io
#3 DONE 0.0s

#4 [medpot linux/arm64 internal] load metadata for docker.io/library/golang:1.23-alpine
#4 ...

#2 [medpot linux/amd64 internal] load metadata for docker.io/library/golang:1.23-alpine
#2 DONE 1.0s

#4 [medpot linux/arm64 internal] load metadata for docker.io/library/golang:1.23-alpine
#4 DONE 1.0s

#5 [medpot internal] load .dockerignore
#5 transferring context: 2B done
#5 DONE 0.0s

#6 [medpot linux/arm64 builder 1/3] FROM docker.io/library/golang:1.23-alpine@sha256:f8113c4b13e2a8b3a168dceaee88ac27743cc84e959f43b9dbd2291e9c3f57a0
#6 resolve docker.io/library/golang:1.23-alpine@sha256:f8113c4b13e2a8b3a168dceaee88ac27743cc84e959f43b9dbd2291e9c3f57a0 0.0s done
#6 CACHED

#7 [medpot linux/amd64 builder 1/3] FROM docker.io/library/golang:1.23-alpine@sha256:f8113c4b13e2a8b3a168dceaee88ac27743cc84e959f43b9dbd2291e9c3f57a0
#7 resolve docker.io/library/golang:1.23-alpine@sha256:f8113c4b13e2a8b3a168dceaee88ac27743cc84e959f43b9dbd2291e9c3f57a0 0.0s done
#7 CACHED

#8 [medpot linux/amd64 builder 2/3] RUN apk --no-cache -U upgrade &&     apk --no-cache -U add         build-base         git         g++
#8 0.229 fetch https://dl-cdn.alpinelinux.org/alpine/v3.21/main/x86_64/APKINDEX.tar.gz
#8 0.489 fetch https://dl-cdn.alpinelinux.org/alpine/v3.21/community/x86_64/APKINDEX.tar.gz
#8 1.374 OK: 7 MiB in 16 packages
#8 1.567 fetch https://dl-cdn.alpinelinux.org/alpine/v3.21/main/x86_64/APKINDEX.tar.gz
#8 1.786 fetch https://dl-cdn.alpinelinux.org/alpine/v3.21/community/x86_64/APKINDEX.tar.gz
#8 2.727 (1/32) Installing libgcc (14.2.0-r4)
#8 2.746 (2/32) Installing jansson (2.14-r4)
#8 2.755 (3/32) Installing libstdc++ (14.2.0-r4)
#8 2.852 (4/32) Installing zstd-libs (1.5.6-r2)
#8 2.892 (5/32) Installing binutils (2.43.1-r1)
#8 3.445 (6/32) Installing libmagic (5.46-r2)
#8 3.572 (7/32) Installing file (5.46-r2)
#8 3.577 (8/32) Installing libgomp (14.2.0-r4)
#8 3.616 (9/32) Installing libatomic (14.2.0-r4)
#8 3.621 (10/32) Installing gmp (6.3.0-r2)
#8 3.660 (11/32) Installing isl26 (0.26-r1)
#8 3.780 (12/32) Installing mpfr4 (4.2.1-r0)
#8 3.822 (13/32) Installing mpc1 (1.3.1-r1)
#8 3.833 (14/32) Installing gcc (14.2.0-r4)
#8 8.681 (15/32) Installing libstdc++-dev (14.2.0-r4)
#8 9.088 (16/32) Installing musl-dev (1.2.5-r9)
#8 9.409 (17/32) Installing g++ (14.2.0-r4)
#8 ...

#9 [medpot linux/arm64 builder 2/3] RUN apk --no-cache -U upgrade &&     apk --no-cache -U add         build-base         git         g++
#9 0.348 fetch https://dl-cdn.alpinelinux.org/alpine/v3.21/main/aarch64/APKINDEX.tar.gz
#9 1.919 fetch https://dl-cdn.alpinelinux.org/alpine/v3.21/community/aarch64/APKINDEX.tar.gz
#9 5.535 OK: 8 MiB in 16 packages
#9 6.130 fetch https://dl-cdn.alpinelinux.org/alpine/v3.21/main/aarch64/APKINDEX.tar.gz
#9 7.494 fetch https://dl-cdn.alpinelinux.org/alpine/v3.21/community/aarch64/APKINDEX.tar.gz
#9 ...

#8 [medpot linux/amd64 builder 2/3] RUN apk --no-cache -U upgrade &&     apk --no-cache -U add         build-base         git         g++
#8 10.85 (18/32) Installing make (4.4.1-r2)
#8 10.87 (19/32) Installing fortify-headers (1.1-r5)
#8 10.88 (20/32) Installing patch (2.7.6-r10)
#8 10.89 (21/32) Installing build-base (0.5-r3)
#8 10.89 (22/32) Installing brotli-libs (1.1.0-r2)
#8 10.93 (23/32) Installing c-ares (1.34.3-r0)
#8 10.95 (24/32) Installing libunistring (1.2-r0)
#8 11.02 (25/32) Installing libidn2 (2.3.7-r0)
#8 11.04 (26/32) Installing nghttp2-libs (1.64.0-r0)
#8 11.05 (27/32) Installing libpsl (0.21.5-r3)
#8 11.06 (28/32) Installing libcurl (8.12.1-r0)
#8 11.10 (29/32) Installing libexpat (2.6.4-r0)
#8 11.11 (30/32) Installing pcre2 (10.43-r0)
#8 11.14 (31/32) Installing git (2.47.2-r0)
#8 11.53 (32/32) Installing git-init-template (2.47.2-r0)
#8 11.55 Executing busybox-1.37.0-r12.trigger
#8 11.59 OK: 255 MiB in 48 packages
#8 DONE 12.5s

#9 [medpot linux/arm64 builder 2/3] RUN apk --no-cache -U upgrade &&     apk --no-cache -U add         build-base         git         g++
#9 11.11 (1/32) Installing libgcc (14.2.0-r4)
#9 11.20 (2/32) Installing jansson (2.14-r4)
#9 11.28 (3/32) Installing libstdc++ (14.2.0-r4)
#9 11.58 (4/32) Installing zstd-libs (1.5.6-r2)
#9 11.68 (5/32) Installing binutils (2.43.1-r1)
#9 13.23 (6/32) Installing libmagic (5.46-r2)
#9 13.58 (7/32) Installing file (5.46-r2)
#9 13.60 (8/32) Installing libgomp (14.2.0-r4)
#9 13.66 (9/32) Installing libatomic (14.2.0-r4)
#9 13.67 (10/32) Installing gmp (6.3.0-r2)
#9 13.78 (11/32) Installing isl26 (0.26-r1)
#9 14.12 (12/32) Installing mpfr4 (4.2.1-r0)
#9 14.20 (13/32) Installing mpc1 (1.3.1-r1)
#9 14.23 (14/32) Installing gcc (14.2.0-r4)
#9 ...

#10 [medpot linux/amd64 builder 3/3] RUN mkdir -p /usr/local/go/src/medpot &&     git clone https://github.com/schmalle/medpot /usr/local/go/src/medpot &&     cd /usr/local/go/src/medpot &&     git checkout 75a2e6134cf926c35b6017d62542274434c87388 &&     go mod init github.com/schmalle/medpot &&     go mod tidy &&     go mod download &&     cp dist/etc/ews.cfg /etc/ &&     go build medpot
#10 0.215 Cloning into '/usr/local/go/src/medpot'...
#10 0.946 Note: switching to '75a2e6134cf926c35b6017d62542274434c87388'.
#10 0.946 
#10 0.946 You are in 'detached HEAD' state. You can look around, make experimental
#10 0.946 changes and commit them, and you can discard any commits you make in this
#10 0.946 state without impacting any branches by switching back to a branch.
#10 0.946 
#10 0.946 If you want to create a new branch to retain commits you create, you may
#10 0.946 do so (now or later) by using -c with the switch command. Example:
#10 0.946 
#10 0.946   git switch -c <new-branch-name>
#10 0.946 
#10 0.946 Or undo this operation with:
#10 0.946 
#10 0.946   git switch -
#10 0.946 
#10 0.946 Turn off this advice by setting config variable advice.detachedHead to false
#10 0.946 
#10 0.946 HEAD is now at 75a2e61 bugfix for ews sending
#10 1.115 go: creating new go.mod: module github.com/schmalle/medpot
#10 1.123 go: to add module requirements and sums:
#10 1.123 	go mod tidy
#10 2.492 go: finding module for package go.uber.org/zap
#10 2.492 go: finding module for package github.com/mozillazg/request
#10 2.492 go: finding module for package github.com/davecgh/go-spew/spew
#10 2.492 go: finding module for package github.com/go-ini/ini
#10 2.986 go: downloading github.com/davecgh/go-spew v1.1.1
#10 2.997 go: downloading go.uber.org/zap v1.27.0
#10 3.125 go: downloading github.com/go-ini/ini v1.67.0
#10 3.697 go: downloading github.com/mozillazg/request v0.8.0
#10 3.809 go: found github.com/davecgh/go-spew/spew in github.com/davecgh/go-spew v1.1.1
#10 3.809 go: found github.com/go-ini/ini in github.com/go-ini/ini v1.67.0
#10 3.809 go: found github.com/mozillazg/request in github.com/mozillazg/request v0.8.0
#10 3.809 go: found go.uber.org/zap in go.uber.org/zap v1.27.0
#10 3.820 go: downloading github.com/stretchr/testify v1.8.1
#10 3.823 go: downloading go.uber.org/multierr v1.10.0
#10 3.834 go: downloading go.uber.org/goleak v1.3.0
#10 3.904 go: downloading gopkg.in/yaml.v3 v3.0.1
#10 3.910 go: downloading github.com/pmezard/go-difflib v1.0.0
#10 4.432 go: finding module for package github.com/bmizerany/assert
#10 4.432 go: finding module for package golang.org/x/net/proxy
#10 4.432 go: finding module for package github.com/bitly/go-simplejson
#10 4.434 go: finding module for package golang.org/x/net/publicsuffix
#10 4.478 go: downloading golang.org/x/net v0.35.0
#10 4.758 go: downloading github.com/bitly/go-simplejson v0.5.1
#10 4.980 go: downloading github.com/bmizerany/assert v0.0.0-20160611221934-b7ed37b82869
#10 5.405 go: found github.com/bitly/go-simplejson in github.com/bitly/go-simplejson v0.5.1
#10 5.405 go: found golang.org/x/net/proxy in golang.org/x/net v0.35.0
#10 5.405 go: found golang.org/x/net/publicsuffix in golang.org/x/net v0.35.0
#10 5.405 go: found github.com/bmizerany/assert in github.com/bmizerany/assert v0.0.0-20160611221934-b7ed37b82869
#10 5.420 go: finding module for package github.com/kr/pretty
#10 5.473 go: downloading github.com/kr/pretty v0.3.1
#10 5.487 go: found github.com/kr/pretty in github.com/kr/pretty v0.3.1
#10 5.959 go: downloading github.com/kr/text v0.2.0
#10 5.961 go: downloading github.com/rogpeppe/go-internal v1.9.0
#10 ...

#9 [medpot linux/arm64 builder 2/3] RUN apk --no-cache -U upgrade &&     apk --no-cache -U add         build-base         git         g++
#9 29.80 (15/32) Installing libstdc++-dev (14.2.0-r4)
#9 31.48 (16/32) Installing musl-dev (1.2.5-r9)
#9 32.33 (17/32) Installing g++ (14.2.0-r4)
#9 37.40 (18/32) Installing make (4.4.1-r2)
#9 37.44 (19/32) Installing fortify-headers (1.1-r5)
#9 37.45 (20/32) Installing patch (2.7.6-r10)
#9 37.52 (21/32) Installing build-base (0.5-r3)
#9 37.52 (22/32) Installing brotli-libs (1.1.0-r2)
#9 37.67 (23/32) Installing c-ares (1.34.3-r0)
#9 37.71 (24/32) Installing libunistring (1.2-r0)
#9 37.90 (25/32) Installing libidn2 (2.3.7-r0)
#9 37.93 (26/32) Installing nghttp2-libs (1.64.0-r0)
#9 37.96 (27/32) Installing libpsl (0.21.5-r3)
#9 37.98 (28/32) Installing libcurl (8.12.1-r0)
#9 38.11 (29/32) Installing libexpat (2.6.4-r0)
#9 38.14 (30/32) Installing pcre2 (10.43-r0)
#9 38.24 (31/32) Installing git (2.47.2-r0)
#9 39.60 (32/32) Installing git-init-template (2.47.2-r0)
#9 39.63 Executing busybox-1.37.0-r12.trigger
#9 39.92 OK: 242 MiB in 48 packages
#9 DONE 40.7s

#10 [medpot linux/amd64 builder 3/3] RUN mkdir -p /usr/local/go/src/medpot &&     git clone https://github.com/schmalle/medpot /usr/local/go/src/medpot &&     cd /usr/local/go/src/medpot &&     git checkout 75a2e6134cf926c35b6017d62542274434c87388 &&     go mod init github.com/schmalle/medpot &&     go mod tidy &&     go mod download &&     cp dist/etc/ews.cfg /etc/ &&     go build medpot
#10 ...

#11 [medpot linux/arm64 builder 3/3] RUN mkdir -p /usr/local/go/src/medpot &&     git clone https://github.com/schmalle/medpot /usr/local/go/src/medpot &&     cd /usr/local/go/src/medpot &&     git checkout 75a2e6134cf926c35b6017d62542274434c87388 &&     go mod init github.com/schmalle/medpot &&     go mod tidy &&     go mod download &&     cp dist/etc/ews.cfg /etc/ &&     go build medpot
#11 0.454 Cloning into '/usr/local/go/src/medpot'...
#11 3.748 Note: switching to '75a2e6134cf926c35b6017d62542274434c87388'.
#11 3.748 
#11 3.748 You are in 'detached HEAD' state. You can look around, make experimental
#11 3.748 changes and commit them, and you can discard any commits you make in this
#11 3.748 state without impacting any branches by switching back to a branch.
#11 3.748 
#11 3.748 If you want to create a new branch to retain commits you create, you may
#11 3.748 do so (now or later) by using -c with the switch command. Example:
#11 3.748 
#11 3.748   git switch -c <new-branch-name>
#11 3.748 
#11 3.748 Or undo this operation with:
#11 3.748 
#11 3.748   git switch -
#11 3.748 
#11 3.748 Turn off this advice by setting config variable advice.detachedHead to false
#11 3.748 
#11 3.758 HEAD is now at 75a2e61 bugfix for ews sending
#11 4.620 go: creating new go.mod: module github.com/schmalle/medpot
#11 4.734 go: to add module requirements and sums:
#11 4.734 	go mod tidy
#11 11.30 go: finding module for package github.com/go-ini/ini
#11 11.30 go: finding module for package github.com/davecgh/go-spew/spew
#11 11.30 go: finding module for package github.com/mozillazg/request
#11 11.30 go: finding module for package go.uber.org/zap
#11 13.55 go: downloading github.com/go-ini/ini v1.67.0
#11 13.58 go: downloading github.com/davecgh/go-spew v1.1.1
#11 13.61 go: downloading github.com/mozillazg/request v0.8.0
#11 13.61 go: downloading go.uber.org/zap v1.27.0
#11 14.72 go: found github.com/davecgh/go-spew/spew in github.com/davecgh/go-spew v1.1.1
#11 14.72 go: found github.com/go-ini/ini in github.com/go-ini/ini v1.67.0
#11 14.72 go: found github.com/mozillazg/request in github.com/mozillazg/request v0.8.0
#11 14.72 go: found go.uber.org/zap in go.uber.org/zap v1.27.0
#11 14.80 go: downloading github.com/stretchr/testify v1.8.1
#11 14.81 go: downloading go.uber.org/multierr v1.10.0
#11 14.81 go: downloading go.uber.org/goleak v1.3.0
#11 15.16 go: downloading gopkg.in/yaml.v3 v3.0.1
#11 15.48 go: downloading github.com/pmezard/go-difflib v1.0.0
#11 15.64 go: finding module for package github.com/bitly/go-simplejson
#11 15.64 go: finding module for package golang.org/x/net/publicsuffix
#11 15.64 go: finding module for package github.com/bmizerany/assert
#11 15.64 go: finding module for package golang.org/x/net/proxy
#11 15.75 go: downloading github.com/bitly/go-simplejson v0.5.1
#11 15.76 go: downloading golang.org/x/net v0.35.0
#11 15.78 go: downloading github.com/bmizerany/assert v0.0.0-20160611221934-b7ed37b82869
#11 20.15 go: found github.com/bitly/go-simplejson in github.com/bitly/go-simplejson v0.5.1
#11 20.15 go: found golang.org/x/net/proxy in golang.org/x/net v0.35.0
#11 20.15 go: found golang.org/x/net/publicsuffix in golang.org/x/net v0.35.0
#11 20.16 go: found github.com/bmizerany/assert in github.com/bmizerany/assert v0.0.0-20160611221934-b7ed37b82869
#11 20.28 go: finding module for package github.com/kr/pretty
#11 20.38 go: downloading github.com/kr/pretty v0.3.1
#11 20.42 go: found github.com/kr/pretty in github.com/kr/pretty v0.3.1
#11 20.63 go: downloading github.com/kr/text v0.2.0
#11 20.64 go: downloading github.com/rogpeppe/go-internal v1.9.0
#11 ...

#10 [medpot linux/amd64 builder 3/3] RUN mkdir -p /usr/local/go/src/medpot &&     git clone https://github.com/schmalle/medpot /usr/local/go/src/medpot &&     cd /usr/local/go/src/medpot &&     git checkout 75a2e6134cf926c35b6017d62542274434c87388 &&     go mod init github.com/schmalle/medpot &&     go mod tidy &&     go mod download &&     cp dist/etc/ews.cfg /etc/ &&     go build medpot
#10 DONE 52.9s

#12 [medpot linux/amd64 stage-1 1/4] COPY --from=builder /usr/local/go/src/medpot/medpot /opt/medpot/medpot
#12 DONE 0.0s

#11 [medpot linux/arm64 builder 3/3] RUN mkdir -p /usr/local/go/src/medpot &&     git clone https://github.com/schmalle/medpot /usr/local/go/src/medpot &&     cd /usr/local/go/src/medpot &&     git checkout 75a2e6134cf926c35b6017d62542274434c87388 &&     go mod init github.com/schmalle/medpot &&     go mod tidy &&     go mod download &&     cp dist/etc/ews.cfg /etc/ &&     go build medpot
#11 ...

#13 [medpot linux/amd64 stage-1 2/4] COPY --from=builder /usr/local/go/src/medpot/template/*.xml /opt/medpot/
#13 DONE 0.1s

#14 [medpot linux/amd64 stage-1 3/4] COPY --from=builder /usr/local/go/src/medpot/dist/etc/ews.cfg /etc/ews.cfg
#14 DONE 0.1s

#11 [medpot linux/arm64 builder 3/3] RUN mkdir -p /usr/local/go/src/medpot &&     git clone https://github.com/schmalle/medpot /usr/local/go/src/medpot &&     cd /usr/local/go/src/medpot &&     git checkout 75a2e6134cf926c35b6017d62542274434c87388 &&     go mod init github.com/schmalle/medpot &&     go mod tidy &&     go mod download &&     cp dist/etc/ews.cfg /etc/ &&     go build medpot
#11 ...

#15 [medpot linux/amd64 stage-1 4/4] WORKDIR /opt/medpot
#15 DONE 0.0s

#11 [medpot linux/arm64 builder 3/3] RUN mkdir -p /usr/local/go/src/medpot &&     git clone https://github.com/schmalle/medpot /usr/local/go/src/medpot &&     cd /usr/local/go/src/medpot &&     git checkout 75a2e6134cf926c35b6017d62542274434c87388 &&     go mod init github.com/schmalle/medpot &&     go mod tidy &&     go mod download &&     cp dist/etc/ews.cfg /etc/ &&     go build medpot
#11 DONE 394.3s

#16 [medpot linux/arm64 stage-1 1/4] COPY --from=builder /usr/local/go/src/medpot/medpot /opt/medpot/medpot
#16 DONE 0.1s

#17 [medpot linux/arm64 stage-1 2/4] COPY --from=builder /usr/local/go/src/medpot/template/*.xml /opt/medpot/
#17 DONE 0.1s

#18 [medpot linux/arm64 stage-1 3/4] COPY --from=builder /usr/local/go/src/medpot/dist/etc/ews.cfg /etc/ews.cfg
#18 DONE 0.0s

#19 [medpot linux/arm64 stage-1 4/4] WORKDIR /opt/medpot
#19 DONE 0.1s

#20 [medpot] exporting to image
#20 exporting layers
#20 exporting layers 1.1s done
#20 exporting manifest sha256:f840acf3d0a199295e76e10cba664decd6ad1b849315bd8b48f234231c42fa03 0.0s done
#20 exporting config sha256:1c4f7b8bdef15b36cc40267402e4ed9e70944511bc995d6a457ac56df877a02e 0.0s done
#20 exporting attestation manifest sha256:a3799b742da6f2becaa184300be1302ad0e10cb1ee571b9015e7d0d64a2eee8a 0.0s done
#20 exporting manifest sha256:9783ae7083e060be75ef176e52bab88b0e8b73994f8c52686cfca4720b36a37f 0.0s done
#20 exporting config sha256:e370292d24bc8401a54204a18bce3a64e56fea38e8b2fe65366fcc8db16f0edc 0.0s done
#20 exporting attestation manifest sha256:684c56290b5c1c124ef5aa4431bc3faa99e463607c572babb9ee0d6f5beebf93 0.0s done
#20 exporting manifest list sha256:33b9305a187d7e97145c2c8f75d9d98a67b80fce9eda1db071412e3e587a6eca 0.0s done
#20 pushing layers
#20 ...

#21 [medpot auth] f0rc3ps/medpot:pull,push token for registry-1.docker.io
#21 DONE 0.0s

#20 [medpot] exporting to image
#20 pushing layers 4.8s done
#20 pushing manifest for docker.io/f0rc3ps/medpot:24.04.1@sha256:33b9305a187d7e97145c2c8f75d9d98a67b80fce9eda1db071412e3e587a6eca
#20 pushing manifest for docker.io/f0rc3ps/medpot:24.04.1@sha256:33b9305a187d7e97145c2c8f75d9d98a67b80fce9eda1db071412e3e587a6eca 3.2s done
#20 ...

#22 [medpot auth] asc3t1c/medpot:pull,push token for ghcr.io
#22 DONE 0.0s

#20 [medpot] exporting to image
#20 pushing layers 4.4s done
#20 pushing manifest for ghcr.io/asc3t1c/medpot:24.04.1@sha256:33b9305a187d7e97145c2c8f75d9d98a67b80fce9eda1db071412e3e587a6eca
#20 pushing manifest for ghcr.io/asc3t1c/medpot:24.04.1@sha256:33b9305a187d7e97145c2c8f75d9d98a67b80fce9eda1db071412e3e587a6eca 2.6s done
#20 DONE 16.2s

#23 [medpot] resolving provenance for metadata file
#23 DONE 0.0s
